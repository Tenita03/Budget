<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Paycheck Tracker â€“ Stable</title>

<style>
:root{
  --bg:#f3f4f6;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#64748b;
  --line:#e5e7eb;
  --brand:#007aff;
  --radius:16px;
  --shadow:0 10px 30px rgba(0,0,0,.06);
}

*{box-sizing:border-box}

body{
  margin:0;
  background:var(--bg);
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",system-ui,sans-serif;
  color:var(--text);
}

.wrap{max-width:900px;margin:auto;padding:16px}

.card{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:16px;
  margin-bottom:16px;
}

h2{margin:0 0 12px;font-size:18px}

.row{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}

input,select,button{
  padding:10px;
  border-radius:10px;
  border:1px solid var(--line);
  font-size:15px;
}

button{
  background:var(--brand);
  color:#fff;
  border:none;
  cursor:pointer;
}

button.secondary{background:#94a3b8}

table{width:100%;border-collapse:collapse}
th,td{padding:8px;border-bottom:1px solid var(--line);text-align:left}
th{font-size:12px;color:var(--muted)}

.remove{cursor:pointer;color:#94a3b8;font-size:18px}
.remove:hover{color:#ef4444}

.kpi{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.kpi .value{
  font-size:28px;
  font-weight:800;
}

.debt-card{
  border:1px solid var(--line);
  border-radius:14px;
  padding:14px;
  margin-bottom:12px;
}

.debt-field{
  display:flex;
  justify-content:space-between;
  margin-bottom:8px;
}

.debt-field label{color:var(--muted)}

.debt-results{
  border-top:1px dashed var(--line);
  margin-top:10px;
  padding-top:10px;
  font-size:13px;
}

@media(max-width:480px){
  .row{grid-template-columns:1fr}
}
</style>
</head>

<body>
<div class="wrap" id="app">

<div class="card">
  <div class="row">
    <select id="month"></select>
    <select id="year"></select>
  </div>
  <div class="row" style="margin-top:10px">
    <input id="startingBalance" type="number" placeholder="Starting balance">
    <button id="lockBtn" class="secondary">ðŸ”“ Lock Month</button>
  </div>
</div>

<div class="card">
  <div class="kpi">
    <div>Remaining This Month</div>
    <div class="value" id="remaining">$0.00</div>
  </div>
</div>

<div class="card">
  <h2>Income</h2>
  <table>
    <thead>
      <tr><th>Date</th><th>Source</th><th>Amount</th><th></th></tr>
    </thead>
    <tbody id="income"></tbody>
  </table>
  <button id="addIncome">+ Add Income</button>
</div>

<div class="card">
  <h2>Bills</h2>
  <table>
    <thead>
      <tr><th>âœ”</th><th>Due</th><th>Paid</th><th>Name</th><th>Amount</th><th></th></tr>
    </thead>
    <tbody id="bills"></tbody>
  </table>
  <button id="addBill">+ Add Bill</button>
</div>

<div class="card">
  <h2>Debt</h2>
  <div id="debt"></div>
  <button id="addDebt">+ Add Debt</button>
</div>

</div>

<script>
const $ = id => document.getElementById(id);
const money = n => `$${(Number(n)||0).toFixed(2)}`;

const incomeT = $("income");
const billsT = $("bills");
const debtT = $("debt");
const remainingEl = $("remaining");
const startBal = $("startingBalance");
const monthSel = $("month");
const yearSel = $("year");

let locked = false;

/* Month / Year */
(() => {
  const now = new Date();
  for(let i=0;i<12;i++)
    monthSel.add(new Option(new Date(0,i).toLocaleString("default",{month:"long"}),i));
  for(let y=2024;y<2036;y++)
    yearSel.add(new Option(y,y));
  monthSel.value = now.getMonth();
  yearSel.value = now.getFullYear();
})();

/* Helpers */
function addRow(table, html){
  const tr = document.createElement("tr");
  tr.innerHTML = html + `<td><span class="remove">Ã—</span></td>`;
  tr.querySelector(".remove").onclick = () => { if(!locked){ tr.remove(); update(); }};
  tr.querySelectorAll("input").forEach(i=>{
    i.addEventListener("input",update);
    i.addEventListener("change",update);
  });

  const paid = tr.querySelector('input[type="checkbox"]');
  const paidDate = tr.querySelector('td:nth-child(3) input');
  if(paid && paidDate){
    paid.addEventListener("change",()=>{
      paidDate.disabled = !paid.checked;
      if(paid.checked && !paidDate.value)
        paidDate.value = new Date().toISOString().slice(0,10);
    });
  }

  table.appendChild(tr);
  update();
}

/* Buttons */
$("addIncome").onclick = ()=>addRow(incomeT,
  `<td><input type="date"></td>
   <td><input></td>
   <td><input type="number" inputmode="decimal"></td>`
);

$("addBill").onclick = ()=>addRow(billsT,
  `<td><input type="checkbox"></td>
   <td><input type="date"></td>
   <td><input type="date" disabled></td>
   <td><input></td>
   <td><input type="number" inputmode="decimal"></td>`
);

$("addDebt").onclick = ()=>{
  const card = document.createElement("div");
  card.className="debt-card";
  card.innerHTML=`
    <div class="debt-field"><label>Name</label><input></div>
    <div class="debt-field"><label>Balance</label><input type="number" inputmode="decimal"></div>
    <div class="debt-field"><label>APR %</label><input type="number" inputmode="decimal"></div>
    <div class="debt-field"><label>Payment</label><input type="number" inputmode="decimal"></div>
    <div class="debt-field"><label>Extra</label><input type="number" inputmode="decimal"></div>
    <div class="debt-results">
      <div>Interest: <span class="interest">$0.00</span></div>
      <div>Principal: <span class="principal">$0.00</span></div>
    </div>
    <button>Remove</button>
  `;
  card.querySelector("button").onclick=()=>{card.remove();update()};
  card.querySelectorAll("input").forEach(i=>i.addEventListener("input",update));
  debtT.appendChild(card);
};

/* Math */
function sumIncome(){
  let t=0;
  incomeT.querySelectorAll("tr").forEach(r=>{
    t+=Number(r.children[2].querySelector("input").value)||0;
  });
  return t;
}

function sumBills(){
  let t=0;
  billsT.querySelectorAll("tr").forEach(r=>{
    t+=Number(r.children[4].querySelector("input").value)||0;
  });
  return t;
}

function sumDebt(){
  let t=0;
  debtT.querySelectorAll(".debt-card").forEach(c=>{
    const bal=+c.children[1].querySelector("input").value||0;
    const apr=+c.children[2].querySelector("input").value||0;
    const pay=+c.children[3].querySelector("input").value||0;
    const extra=+c.children[4].querySelector("input").value||0;
    const interest=bal*(apr/100/12);
    const principal=Math.max(pay-interest,0)+extra;
    c.querySelector(".interest").textContent=money(interest);
    c.querySelector(".principal").textContent=money(principal);
    t+=pay+extra;
  });
  return t;
}

function update(){
  const start=+startBal.value||0;
  const rem=start+sumIncome()-sumBills()-sumDebt();
  remainingEl.textContent=money(rem);
}

startBal.addEventListener("input",update);
update();
</script>
</body>
</html>